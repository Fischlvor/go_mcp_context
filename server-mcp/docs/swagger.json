{
    "schemes": [
        "http",
        "https"
    ],
    "swagger": "2.0",
    "info": {
        "description": "私有化文档检索服务 - 为企业内网的 AI IDE 提供实时、准确的技术文档和代码示例",
        "title": "go-mcp-context API",
        "termsOfService": "http://swagger.io/terms/",
        "contact": {
            "name": "API Support",
            "url": "http://www.swagger.io/support"
        },
        "license": {
            "name": "Apache 2.0",
            "url": "http://www.apache.org/licenses/LICENSE-2.0.html"
        },
        "version": "1.0.0"
    },
    "host": "10.21.71.19:8090",
    "basePath": "/",
    "paths": {
        "/api/v1/api-keys/:id": {
            "delete": {
                "security": [
                    {
                        "JWTAuth": []
                    }
                ],
                "description": "删除指定的 API Key（需要认证）",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "API Keys"
                ],
                "summary": "删除 API Key",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "API Key ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/response.Response"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    }
                }
            }
        },
        "/api/v1/api-keys/create": {
            "post": {
                "security": [
                    {
                        "JWTAuth": []
                    }
                ],
                "description": "为当前用户创建新的 API Key，用于 MCP 协议调用（需要认证）",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "API Keys"
                ],
                "summary": "创建 API Key",
                "parameters": [
                    {
                        "description": "API Key 信息",
                        "name": "data",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/request.APIKeyCreate"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/response.Response"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/definitions/response.APIKeyCreateResponse"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    }
                }
            }
        },
        "/api/v1/api-keys/list": {
            "get": {
                "security": [
                    {
                        "JWTAuth": []
                    }
                ],
                "description": "获取当前用户的所有 API Key（需要认证）",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "API Keys"
                ],
                "summary": "获取 API Key 列表",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/response.Response"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/definitions/response.APIKeyListItem"
                                            }
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    }
                }
            }
        },
        "/api/v1/auth/callback": {
            "get": {
                "description": "SSO 服务回调接口，用 code 换取 token 并设置 session",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Auth"
                ],
                "summary": "SSO 登录回调",
                "parameters": [
                    {
                        "type": "string",
                        "description": "SSO 授权码",
                        "name": "code",
                        "in": "query",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "SSO 状态参数",
                        "name": "state",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "SSO 回调地址",
                        "name": "redirect_uri",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    }
                }
            }
        },
        "/api/v1/auth/sso_login_url": {
            "get": {
                "description": "获取 SSO 授权地址，用于重定向到 SSO 服务进行登录",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Auth"
                ],
                "summary": "获取 SSO 登录地址",
                "parameters": [
                    {
                        "type": "string",
                        "description": "SSO 回调地址，默认使用配置中的值",
                        "name": "redirect_uri",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "登录后要返回的 URL，默认为 /",
                        "name": "return_url",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    }
                }
            }
        },
        "/api/v1/documents/chunks/{mode}/{libid}": {
            "get": {
                "description": "获取指定库的文档块，支持向量搜索和全量列表。mode 为 code 或 info，version 可选（默认使用库的默认版本），topic 可选（传入则进行向量搜索）",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Documents"
                ],
                "summary": "获取文档块",
                "parameters": [
                    {
                        "type": "string",
                        "description": "模式：code(代码示例) 或 info(文档说明)",
                        "name": "mode",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "integer",
                        "description": "库 ID",
                        "name": "libid",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "版本号，不传则使用库的默认版本",
                        "name": "version",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "搜索主题，不传则返回全部文档块",
                        "name": "topic",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/response.Response"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object",
                                            "additionalProperties": true
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    }
                }
            }
        },
        "/api/v1/documents/detail/:id": {
            "get": {
                "description": "获取指定文档的完整信息",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Documents"
                ],
                "summary": "获取文档详情",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "文档 ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/response.Response"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object",
                                            "additionalProperties": true
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    }
                }
            }
        },
        "/api/v1/documents/list": {
            "get": {
                "description": "分页获取指定库的文档列表",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Documents"
                ],
                "summary": "获取文档列表",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "库 ID",
                        "name": "library_id",
                        "in": "query",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "版本号（可选）",
                        "name": "version",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "default": 1,
                        "description": "页码，默认 1",
                        "name": "page",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "default": 10,
                        "description": "每页数量，默认 10，最大 50",
                        "name": "limit",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/response.Response"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object",
                                            "additionalProperties": true
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    }
                }
            }
        },
        "/api/v1/documents/upload": {
            "post": {
                "security": [
                    {
                        "JWTAuth": []
                    }
                ],
                "description": "上传文档文件到指定库版本（支持 Markdown、PDF、DOCX、Swagger）（需要认证）",
                "consumes": [
                    "multipart/form-data"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Documents"
                ],
                "summary": "上传文档",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "库 ID",
                        "name": "library_id",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "版本号，默认为 latest",
                        "name": "version",
                        "in": "formData"
                    },
                    {
                        "type": "file",
                        "description": "文档文件",
                        "name": "file",
                        "in": "formData",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    }
                }
            }
        },
        "/api/v1/documents/upload-sse": {
            "post": {
                "security": [
                    {
                        "JWTAuth": []
                    }
                ],
                "description": "上传文档文件到指定库版本，通过 SSE 实时推送处理进度（需要认证）",
                "consumes": [
                    "multipart/form-data"
                ],
                "produces": [
                    "text/event-stream"
                ],
                "tags": [
                    "Documents"
                ],
                "summary": "上传文档（SSE 实时推送）",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "库 ID",
                        "name": "library_id",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "版本号，默认为 latest",
                        "name": "version",
                        "in": "formData"
                    },
                    {
                        "type": "file",
                        "description": "文档文件",
                        "name": "file",
                        "in": "formData",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "处理状态流",
                        "schema": {
                            "$ref": "#/definitions/response.ProcessStatus"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    }
                }
            }
        },
        "/api/v1/libraries": {
            "get": {
                "description": "分页获取所有文档库，支持按名称搜索和排序",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Libraries"
                ],
                "summary": "获取库列表",
                "parameters": [
                    {
                        "type": "string",
                        "description": "库名称（模糊搜索）",
                        "name": "name",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "库状态（可选）",
                        "name": "status",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "排序方式：popular(热门) 或 recent(最新，默认)",
                        "name": "sort",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "default": 1,
                        "description": "页码，默认 1",
                        "name": "page",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "default": 10,
                        "description": "每页数量，默认 10，最大 50",
                        "name": "limit",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/response.Response"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/definitions/response.LibraryListItem"
                                            }
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    }
                }
            },
            "post": {
                "security": [
                    {
                        "JWTAuth": []
                    }
                ],
                "description": "创建一个新的文档库（需要认证）",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Libraries"
                ],
                "summary": "创建新库",
                "parameters": [
                    {
                        "description": "库信息",
                        "name": "data",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/request.LibraryCreate"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/response.Response"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/definitions/response.LibraryInfo"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    }
                }
            }
        },
        "/api/v1/libraries/:id": {
            "get": {
                "description": "获取指定库的完整信息，包括版本、统计数据等",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Libraries"
                ],
                "summary": "获取库详情",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "库 ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/response.Response"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/definitions/response.LibraryInfo"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    }
                }
            },
            "put": {
                "security": [
                    {
                        "JWTAuth": []
                    }
                ],
                "description": "更新库的名称和描述（需要认证）",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Libraries"
                ],
                "summary": "更新库信息",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "库 ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "更新信息",
                        "name": "data",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/request.LibraryUpdate"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/response.Response"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/definitions/response.LibraryInfo"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    }
                }
            },
            "delete": {
                "security": [
                    {
                        "JWTAuth": []
                    }
                ],
                "description": "删除指定库及其所有版本和文档（需要认证）",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Libraries"
                ],
                "summary": "删除库",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "库 ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/response.Response"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    }
                }
            }
        },
        "/api/v1/libraries/:id/versions": {
            "get": {
                "description": "获取指定库的所有版本及其统计信息（token数、chunk数、更新时间）",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Libraries"
                ],
                "summary": "获取库的版本列表",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "库 ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/response.Response"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/definitions/response.VersionInfo"
                                            }
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    }
                }
            },
            "post": {
                "security": [
                    {
                        "JWTAuth": []
                    }
                ],
                "description": "为指定库创建新版本（需要认证）",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Libraries"
                ],
                "summary": "创建新版本",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "库 ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "版本信息",
                        "name": "data",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/request.VersionCreate"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/response.Response"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    }
                }
            }
        },
        "/api/v1/libraries/:id/versions/:version": {
            "delete": {
                "security": [
                    {
                        "JWTAuth": []
                    }
                ],
                "description": "删除指定库的版本及其所有文档和chunks（需要认证）",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Libraries"
                ],
                "summary": "删除版本",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "库 ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "版本号",
                        "name": "version",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/response.Response"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    }
                }
            }
        },
        "/api/v1/libraries/:id/versions/:version/refresh": {
            "post": {
                "security": [
                    {
                        "JWTAuth": []
                    }
                ],
                "description": "重新处理指定版本的所有文档，更新向量和chunks（需要认证）",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Libraries"
                ],
                "summary": "刷新版本",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "库 ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "版本号",
                        "name": "version",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/response.Response"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    }
                }
            }
        },
        "/api/v1/libraries/:id/versions/:version/refresh-sse": {
            "post": {
                "security": [
                    {
                        "JWTAuth": []
                    }
                ],
                "description": "重新处理指定版本的所有文档，通过 SSE 实时推送处理进度（需要认证）",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "text/event-stream"
                ],
                "tags": [
                    "Libraries"
                ],
                "summary": "刷新版本（SSE 实时推送）",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "库 ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "版本号",
                        "name": "version",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "刷新状态流",
                        "schema": {
                            "$ref": "#/definitions/response.RefreshStatus"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    }
                }
            }
        },
        "/api/v1/libraries/github/import": {
            "post": {
                "security": [
                    {
                        "JWTAuth": []
                    }
                ],
                "description": "从 GitHub 仓库导入文档到指定库版本，异步处理，立即返回（需要认证）",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Libraries"
                ],
                "summary": "从 GitHub 导入文档（异步）",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "库 ID",
                        "name": "id",
                        "in": "query",
                        "required": true
                    },
                    {
                        "description": "导入参数（repo、branch、version）",
                        "name": "data",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/request.GitHubImportRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/response.Response"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    }
                }
            }
        },
        "/api/v1/libraries/github/import-sse": {
            "post": {
                "security": [
                    {
                        "JWTAuth": []
                    }
                ],
                "description": "从 GitHub 仓库导入文档到指定库版本，通过 SSE 实时推送导入进度（需要认证）",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "text/event-stream"
                ],
                "tags": [
                    "Libraries"
                ],
                "summary": "从 GitHub 导入文档（SSE 实时推送）",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "库 ID",
                        "name": "id",
                        "in": "query",
                        "required": true
                    },
                    {
                        "description": "导入参数（repo、branch、version）",
                        "name": "data",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/request.GitHubImportRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "导入进度流",
                        "schema": {
                            "$ref": "#/definitions/response.GitHubImportProgress"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    }
                }
            }
        },
        "/api/v1/libraries/github/init-import": {
            "post": {
                "security": [
                    {
                        "JWTAuth": []
                    }
                ],
                "description": "从 GitHub URL 创建新库并导入默认分支的文档，自动生成库名（需要认证）",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Libraries"
                ],
                "summary": "从 GitHub URL 初始化导入",
                "parameters": [
                    {
                        "description": "GitHub URL",
                        "name": "data",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/request.GitHubInitImportRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/response.Response"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/definitions/response.GitHubInitImportResponse"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    }
                }
            }
        },
        "/api/v1/libraries/github/releases": {
            "get": {
                "description": "获取指定 GitHub 仓库的主要版本列表和仓库信息",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Libraries"
                ],
                "summary": "获取 GitHub 仓库版本列表",
                "parameters": [
                    {
                        "type": "string",
                        "description": "GitHub 仓库名（格式：owner/repo）",
                        "name": "repo",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/response.Response"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object",
                                            "additionalProperties": true
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    }
                }
            }
        },
        "/api/v1/logs": {
            "get": {
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "ActivityLog"
                ],
                "summary": "获取活动日志列表",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "库ID",
                        "name": "libraryId",
                        "in": "query",
                        "required": true
                    },
                    {
                        "type": "integer",
                        "description": "返回数量，默认50，最大100",
                        "name": "limit",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/response.Response"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object",
                                            "additionalProperties": true
                                        }
                                    }
                                }
                            ]
                        }
                    }
                }
            }
        },
        "/api/v1/search": {
            "post": {
                "description": "在指定库的指定版本中搜索文档，支持 code 和 info 两种模式，支持分页",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Search"
                ],
                "summary": "搜索文档",
                "parameters": [
                    {
                        "description": "搜索条件",
                        "name": "data",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/request.Search"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/response.Response"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/definitions/response.SearchResult"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    }
                }
            }
        },
        "/api/v1/stats/my": {
            "get": {
                "security": [
                    {
                        "JWTAuth": []
                    }
                ],
                "description": "获取当前用户的库、文档、API Key 等统计数据（需要认证）",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Stats"
                ],
                "summary": "获取统计数据",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/response.Response"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object",
                                            "additionalProperties": true
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    }
                }
            }
        },
        "/api/v1/user/info": {
            "get": {
                "security": [
                    {
                        "JWTAuth": []
                    }
                ],
                "description": "获取当前登录用户的信息（需要认证）",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "User"
                ],
                "summary": "获取用户信息",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    }
                }
            }
        },
        "/mcp": {
            "post": {
                "security": [
                    {
                        "MCP_API_KEY": []
                    }
                ],
                "description": "处理 MCP JSON-RPC 2.0 协议请求，支持 initialize、tools/list、tools/call、resources/list 等方法（需要 MCP_API_KEY）",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "MCP"
                ],
                "summary": "MCP 请求处理",
                "parameters": [
                    {
                        "description": "MCP JSON-RPC 请求",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/request.MCPRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/response.MCPResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/response.MCPResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/response.MCPResponse"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "request.APIKeyCreate": {
            "type": "object",
            "required": [
                "name"
            ],
            "properties": {
                "name": {
                    "type": "string",
                    "maxLength": 100
                }
            }
        },
        "request.GitHubImportRequest": {
            "type": "object",
            "required": [
                "repo"
            ],
            "properties": {
                "branch": {
                    "description": "分支名（与 Tag 二选一）",
                    "type": "string"
                },
                "excludes": {
                    "description": "排除模式",
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "path_filter": {
                    "description": "只导入指定路径（如 docs/）",
                    "type": "string"
                },
                "repo": {
                    "description": "owner/repo",
                    "type": "string"
                },
                "tag": {
                    "description": "特定 tag",
                    "type": "string"
                },
                "version": {
                    "description": "存储为的版本名",
                    "type": "string"
                }
            }
        },
        "request.GitHubInitImportRequest": {
            "type": "object",
            "required": [
                "github_url"
            ],
            "properties": {
                "github_url": {
                    "description": "完整 GitHub URL，如 https://github.com/gin-gonic/gin",
                    "type": "string"
                }
            }
        },
        "request.LibraryCreate": {
            "type": "object",
            "required": [
                "name"
            ],
            "properties": {
                "description": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                }
            }
        },
        "request.LibraryUpdate": {
            "type": "object",
            "required": [
                "name"
            ],
            "properties": {
                "description": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                }
            }
        },
        "request.MCPRequest": {
            "type": "object",
            "properties": {
                "id": {},
                "jsonrpc": {
                    "type": "string"
                },
                "method": {
                    "type": "string"
                },
                "params": {
                    "type": "object",
                    "additionalProperties": true
                }
            }
        },
        "request.Search": {
            "type": "object",
            "required": [
                "library_id",
                "query",
                "version"
            ],
            "properties": {
                "library_id": {
                    "type": "integer"
                },
                "limit": {
                    "description": "每页数量，默认 10，最大 50",
                    "type": "integer"
                },
                "mode": {
                    "description": "code, info, 或空（全部）",
                    "type": "string"
                },
                "page": {
                    "description": "页码，默认 1",
                    "type": "integer"
                },
                "query": {
                    "type": "string"
                },
                "version": {
                    "description": "版本，必填",
                    "type": "string"
                }
            }
        },
        "request.VersionCreate": {
            "type": "object",
            "required": [
                "version"
            ],
            "properties": {
                "version": {
                    "type": "string",
                    "maxLength": 50,
                    "minLength": 1
                }
            }
        },
        "response.APIKeyCreateResponse": {
            "type": "object",
            "properties": {
                "api_key": {
                    "description": "完整 key，仅此一次显示",
                    "type": "string"
                },
                "created_at": {
                    "type": "string"
                },
                "id": {
                    "type": "integer"
                },
                "name": {
                    "type": "string"
                },
                "token_suffix": {
                    "description": "后 4 位",
                    "type": "string"
                }
            }
        },
        "response.APIKeyListItem": {
            "type": "object",
            "properties": {
                "created_at": {
                    "type": "string"
                },
                "id": {
                    "type": "integer"
                },
                "last_used_at": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "token_suffix": {
                    "description": "后 4 位",
                    "type": "string"
                }
            }
        },
        "response.GitHubImportProgress": {
            "type": "object",
            "properties": {
                "current": {
                    "description": "当前进度",
                    "type": "integer"
                },
                "filename": {
                    "description": "当前文件名",
                    "type": "string"
                },
                "message": {
                    "description": "状态消息",
                    "type": "string"
                },
                "stage": {
                    "description": "fetching_tree, downloading, processing, completed, failed",
                    "type": "string"
                },
                "total": {
                    "description": "总数",
                    "type": "integer"
                }
            }
        },
        "response.GitHubInitImportResponse": {
            "type": "object",
            "properties": {
                "library_id": {
                    "type": "integer"
                },
                "version": {
                    "type": "string"
                }
            }
        },
        "response.LibraryInfo": {
            "type": "object",
            "properties": {
                "chunk_count": {
                    "type": "integer"
                },
                "created_at": {
                    "type": "string"
                },
                "default_version": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "document_count": {
                    "type": "integer"
                },
                "id": {
                    "type": "integer"
                },
                "name": {
                    "type": "string"
                },
                "source_type": {
                    "type": "string"
                },
                "source_url": {
                    "type": "string"
                },
                "status": {
                    "type": "string"
                },
                "token_count": {
                    "type": "integer"
                },
                "updated_at": {
                    "type": "string"
                },
                "versions": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            }
        },
        "response.LibraryListItem": {
            "type": "object",
            "properties": {
                "chunk_count": {
                    "description": "对应 Context7 的 SNIPPETS",
                    "type": "integer"
                },
                "default_version": {
                    "description": "当前版本",
                    "type": "string"
                },
                "id": {
                    "type": "integer"
                },
                "name": {
                    "type": "string"
                },
                "source_type": {
                    "description": "github, website, local",
                    "type": "string"
                },
                "source_url": {
                    "description": "vuejs/docs",
                    "type": "string"
                },
                "token_count": {
                    "description": "对应 Context7 的 TOKENS",
                    "type": "integer"
                },
                "updated_at": {
                    "description": "对应 Context7 的 UPDATE",
                    "type": "string"
                }
            }
        },
        "response.MCPError": {
            "type": "object",
            "properties": {
                "code": {
                    "type": "integer"
                },
                "data": {},
                "message": {
                    "type": "string"
                }
            }
        },
        "response.MCPResponse": {
            "type": "object",
            "properties": {
                "error": {
                    "$ref": "#/definitions/response.MCPError"
                },
                "id": {},
                "jsonrpc": {
                    "type": "string"
                },
                "result": {}
            }
        },
        "response.ProcessStatus": {
            "type": "object",
            "properties": {
                "message": {
                    "type": "string"
                },
                "progress": {
                    "description": "0-100",
                    "type": "integer"
                },
                "stage": {
                    "description": "uploaded, parsing, chunking, embedding, saving, completed, failed",
                    "type": "string"
                },
                "status": {
                    "description": "processing, active, failed",
                    "type": "string"
                }
            }
        },
        "response.RefreshStatus": {
            "type": "object",
            "properties": {
                "current": {
                    "description": "当前第几个",
                    "type": "integer"
                },
                "doc_id": {
                    "description": "文档 ID",
                    "type": "integer"
                },
                "doc_title": {
                    "description": "文档标题",
                    "type": "string"
                },
                "message": {
                    "description": "消息",
                    "type": "string"
                },
                "stage": {
                    "description": "阶段: started, doc_processing, doc_completed, doc_failed, all_completed, error",
                    "type": "string"
                },
                "total": {
                    "description": "总共几个",
                    "type": "integer"
                }
            }
        },
        "response.Response": {
            "type": "object",
            "properties": {
                "code": {
                    "type": "integer"
                },
                "data": {},
                "msg": {
                    "type": "string"
                }
            }
        },
        "response.SearchResult": {
            "type": "object",
            "properties": {
                "hasMore": {
                    "type": "boolean"
                },
                "limit": {
                    "type": "integer"
                },
                "page": {
                    "type": "integer"
                },
                "results": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/response.SearchResultItem"
                    }
                },
                "total": {
                    "type": "integer"
                }
            }
        },
        "response.SearchResultItem": {
            "type": "object",
            "properties": {
                "chunk_id": {
                    "type": "integer"
                },
                "code": {
                    "description": "代码内容（code mode），info mode 为空",
                    "type": "string"
                },
                "content": {
                    "description": "ChunkText 原文",
                    "type": "string"
                },
                "description": {
                    "description": "LLM 生成的描述（code mode），info mode 为空",
                    "type": "string"
                },
                "language": {
                    "description": "代码语言（code mode），info mode 为空",
                    "type": "string"
                },
                "library_id": {
                    "type": "integer"
                },
                "mode": {
                    "description": "类型：code 或 info",
                    "type": "string"
                },
                "relevance": {
                    "description": "最终相关性分数 0-1",
                    "type": "number"
                },
                "source": {
                    "description": "文件来源路径",
                    "type": "string"
                },
                "title": {
                    "description": "LLM 生成的标题（code mode）或 headers 层级（info mode）",
                    "type": "string"
                },
                "tokens": {
                    "description": "token 数",
                    "type": "integer"
                },
                "upload_id": {
                    "type": "integer"
                },
                "version": {
                    "description": "文档版本",
                    "type": "string"
                }
            }
        },
        "response.VersionInfo": {
            "type": "object",
            "properties": {
                "chunk_count": {
                    "type": "integer"
                },
                "last_updated": {
                    "type": "string"
                },
                "token_count": {
                    "type": "integer"
                },
                "version": {
                    "type": "string"
                }
            }
        }
    },
    "securityDefinitions": {
        "JWTAuth": {
            "description": "JWT token in the format \"Bearer {token}\"",
            "type": "apiKey",
            "name": "Authorization",
            "in": "header"
        },
        "MCP_API_KEY": {
            "description": "API Key for MCP protocol calls",
            "type": "apiKey",
            "name": "MCP_API_KEY",
            "in": "header"
        }
    }
}